{
  "test_metadata": {
    "generated_at": "2025-08-07T10:46:58.921507Z",
    "test_suite": "People Management API - Comprehensive Tests",
    "base_url": "http://localhost:8000",
    "test_user": "test@arketic.com",
    "documentation_ref": "/docs/api/PEOPLE.md"
  },
  "test_summary": {
    "total_tests": 15,
    "passed": 14,
    "failed": 1,
    "skipped": 0,
    "errors": 0,
    "success_rate_percent": 93.33,
    "average_duration_ms": 19.11
  },
  "endpoint_analysis": {
    "/api/v1/auth/login": {
      "total_calls": 1,
      "passed": 1,
      "failed": 0,
      "errors": 0,
      "avg_duration_ms": 234.72
    },
    "/api/v1/organization/people/": {
      "total_calls": 7,
      "passed": 6,
      "failed": 1,
      "errors": 0,
      "avg_duration_ms": 4.17
    },
    "/api/v1/organization/people/?page=1&page_size=5": {
      "total_calls": 1,
      "passed": 1,
      "failed": 0,
      "errors": 0,
      "avg_duration_ms": 3.85
    },
    "/api/v1/organization/people/920a8478-946c-41ed-8543-e520aa87f0a8": {
      "total_calls": 1,
      "passed": 1,
      "failed": 0,
      "errors": 0,
      "avg_duration_ms": 5.77
    },
    "/api/v1/organization/people/c2ab811b-d9ef-4ff4-bd04-f6a57e814024": {
      "total_calls": 1,
      "passed": 1,
      "failed": 0,
      "errors": 0,
      "avg_duration_ms": 4.41
    },
    "/api/v1/organization/people/2dbd4128-fa7a-4805-84fc-70766e6017eb": {
      "total_calls": 1,
      "passed": 1,
      "failed": 0,
      "errors": 0,
      "avg_duration_ms": 4.65
    },
    "/api/v1/organization/people/217dffe7-0bfc-498d-9619-049b9746229b": {
      "total_calls": 1,
      "passed": 1,
      "failed": 0,
      "errors": 0,
      "avg_duration_ms": 1.37
    },
    "/api/v1/organization/people/8d31075d-145c-43a0-b40a-302217c90f6c": {
      "total_calls": 1,
      "passed": 1,
      "failed": 0,
      "errors": 0,
      "avg_duration_ms": 1.34
    },
    "/api/v1/organization/people/ad76b09b-9bb0-47bd-b129-cfa6cd952df2": {
      "total_calls": 1,
      "passed": 1,
      "failed": 0,
      "errors": 0,
      "avg_duration_ms": 1.35
    }
  },
  "known_issues": {
    "create_person_409_conflict": {
      "description": "POST /api/v1/organization/people/ returns 409 Conflict for unique data",
      "status": "Active",
      "impact": "Prevents all person creation",
      "documented_in": "/docs/api/PEOPLE.md#known-issues"
    }
  },
  "detailed_results": [
    {
      "test_name": "Authentication",
      "endpoint": "/api/v1/auth/login",
      "method": "POST",
      "expected_status": [
        200
      ],
      "actual_status": 200,
      "payload": {
        "email": "test@arketic.com",
        "password": "testpass123",
        "remember_me": false
      },
      "response_body": {
        "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0QGFya2V0aWMuY29tIiwidXNlcl9pZCI6IjQyYzlhNjg4LWUyNGEtNGNkNi1iNWUyLTRlNzdmMTg5NGE2YiIsImVtYWlsIjoidGVzdEBhcmtldGljLmNvbSIsInVzZXJuYW1lIjpudWxsLCJyb2xlcyI6WyJ1c2VyIl0sInBlcm1pc3Npb25zIjpbInJlYWQiLCJ3cml0ZSIsInByb2ZpbGU6dXBkYXRlIiwicHJlZmVyZW5jZXM6dXBkYXRlIl0sImV4cCI6MTc1NDU2NTQxOH0.w4hNNgz60t1w0_zkc5RdvG7KghfvZ_L9aojp2yJUz1g",
        "refresh_token": "KEIspepWJQ0YI61QcHorG4fx599WVkK8mS7Y58jLwEs",
        "token_type": "bearer",
        "expires_in": 1800,
        "user": {
          "id": "42c9a688-e24a-4cd6-b5e2-4e77f1894a6b",
          "email": "test@arketic.com",
          "username": null,
          "first_name": "Test",
          "last_name": "User",
          "role": "user",
          "is_verified": true
        }
      },
      "response_text": "{\"access_token\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0QGFya2V0aWMuY29tIiwidXNlcl9pZCI6IjQyYzlhNjg4LWUyNGEtNGNkNi1iNWUyLTRlNzdmMTg5NGE2YiIsImVtYWlsIjoidGVzdEBhcmtldGljLmNvbSIsInVzZXJuYW1lIjpudWxsLCJyb2xlcyI6WyJ1c2VyIl0sInBlcm1pc3Npb25zIjpbInJlYWQiLCJ3cml0ZSIsInByb2ZpbGU6dXBkYXRlIiwicHJlZmVyZW5jZXM6dXBkYXRlIl0sImV4cCI6MTc1NDU2NTQxOH0.w4hNNgz60t1w0_zkc5RdvG7KghfvZ_L9aojp2yJUz1g\",\"refresh_token\":\"KEIspepWJQ0YI61QcHorG4fx599WVkK8mS7Y58jLwEs\",\"token_type\":\"bearer\",\"expires_in\":1800,\"user\":{\"id\":\"42c9a688-e24a-4cd6-b5e2-4e77f1894a6b\",\"email\":\"test@arketic.com\",\"username\":null,\"first_name\":\"Test\",\"last_name\":\"User\",\"role\":\"user\",\"is_verified\":true}}",
      "timestamp": "2025-08-07T10:46:58.168270Z",
      "duration_ms": 234.72,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Create Person - Known Issue",
      "endpoint": "/api/v1/organization/people/",
      "method": "POST",
      "expected_status": [
        201,
        409
      ],
      "actual_status": 409,
      "payload": {
        "first_name": "Test",
        "last_name": "Person",
        "email": "test.person.1754563618168302_e23109_create@testcompany1754563618168302.com",
        "phone": "+1-555-0199",
        "job_title": "Test Engineer",
        "department": "Quality Assurance",
        "site": "Test Site",
        "location": "Test City, TC",
        "role": "User",
        "manager_id": null,
        "hire_date": "2025-07-08T13:46:58.168324",
        "notes": "Test person for API validation"
      },
      "response_body": {
        "detail": "Person with this email already exists"
      },
      "response_text": "{\"detail\":\"Person with this email already exists\"}",
      "timestamp": "2025-08-07T10:46:58.176592Z",
      "duration_ms": 8.25,
      "status": "FAIL",
      "error_message": "409 Conflict - Known issue: false positive conflict detection",
      "validation_notes": "This is the documented 409 conflict bug with unique data"
    },
    {
      "test_name": "Validation - Missing Required Fields",
      "endpoint": "/api/v1/organization/people/",
      "method": "POST",
      "expected_status": [
        422
      ],
      "actual_status": 422,
      "payload": {
        "first_name": "Test"
      },
      "response_body": {
        "detail": [
          {
            "type": "missing",
            "loc": [
              "body",
              "last_name"
            ],
            "msg": "Field required",
            "input": {
              "first_name": "Test"
            },
            "url": "https://errors.pydantic.dev/2.5/v/missing"
          },
          {
            "type": "missing",
            "loc": [
              "body",
              "email"
            ],
            "msg": "Field required",
            "input": {
              "first_name": "Test"
            },
            "url": "https://errors.pydantic.dev/2.5/v/missing"
          }
        ]
      },
      "response_text": "{\"detail\":[{\"type\":\"missing\",\"loc\":[\"body\",\"last_name\"],\"msg\":\"Field required\",\"input\":{\"first_name\":\"Test\"},\"url\":\"https://errors.pydantic.dev/2.5/v/missing\"},{\"type\":\"missing\",\"loc\":[\"body\",\"email\"],\"msg\":\"Field required\",\"input\":{\"first_name\":\"Test\"},\"url\":\"https://errors.pydantic.dev/2.5/v/missing\"}]}",
      "timestamp": "2025-08-07T10:46:58.280964Z",
      "duration_ms": 4.21,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Validation - Invalid Email Format",
      "endpoint": "/api/v1/organization/people/",
      "method": "POST",
      "expected_status": [
        422
      ],
      "actual_status": 422,
      "payload": {
        "first_name": "Test",
        "last_name": "Person",
        "email": "not-an-email",
        "role": "User"
      },
      "response_body": {
        "detail": [
          {
            "type": "value_error",
            "loc": [
              "body",
              "email"
            ],
            "msg": "value is not a valid email address: The email address is not valid. It must have exactly one @-sign.",
            "input": "not-an-email",
            "ctx": {
              "reason": "The email address is not valid. It must have exactly one @-sign."
            }
          }
        ]
      },
      "response_text": "{\"detail\":[{\"type\":\"value_error\",\"loc\":[\"body\",\"email\"],\"msg\":\"value is not a valid email address: The email address is not valid. It must have exactly one @-sign.\",\"input\":\"not-an-email\",\"ctx\":{\"reason\":\"The email address is not valid. It must have exactly one @-sign.\"}}]}",
      "timestamp": "2025-08-07T10:46:58.284122Z",
      "duration_ms": 3.13,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Validation - Invalid Role",
      "endpoint": "/api/v1/organization/people/",
      "method": "POST",
      "expected_status": [
        422
      ],
      "actual_status": 422,
      "payload": {
        "first_name": "Test",
        "last_name": "Person",
        "email": "test@example.com",
        "role": "InvalidRole"
      },
      "response_body": {
        "detail": [
          {
            "type": "enum",
            "loc": [
              "body",
              "role"
            ],
            "msg": "Input should be 'Admin', 'User', 'Manager' or 'Viewer'",
            "input": "InvalidRole",
            "ctx": {
              "expected": "'Admin', 'User', 'Manager' or 'Viewer'"
            }
          }
        ]
      },
      "response_text": "{\"detail\":[{\"type\":\"enum\",\"loc\":[\"body\",\"role\"],\"msg\":\"Input should be 'Admin', 'User', 'Manager' or 'Viewer'\",\"input\":\"InvalidRole\",\"ctx\":{\"expected\":\"'Admin', 'User', 'Manager' or 'Viewer'\"}}]}",
      "timestamp": "2025-08-07T10:46:58.287438Z",
      "duration_ms": 3.29,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "List People - Basic",
      "endpoint": "/api/v1/organization/people/",
      "method": "GET",
      "expected_status": [
        200
      ],
      "actual_status": 200,
      "payload": null,
      "response_body": {
        "people": [],
        "total": 0,
        "page": 1,
        "page_size": 20,
        "total_pages": 0
      },
      "response_text": "{\"people\":[],\"total\":0,\"page\":1,\"page_size\":20,\"total_pages\":0}",
      "timestamp": "2025-08-07T10:46:58.394371Z",
      "duration_ms": 6.79,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "List People - Pagination",
      "endpoint": "/api/v1/organization/people/?page=1&page_size=5",
      "method": "GET",
      "expected_status": [
        200
      ],
      "actual_status": 200,
      "payload": null,
      "response_body": {
        "people": [],
        "total": 0,
        "page": 1,
        "page_size": 5,
        "total_pages": 0
      },
      "response_text": "{\"people\":[],\"total\":0,\"page\":1,\"page_size\":5,\"total_pages\":0}",
      "timestamp": "2025-08-07T10:46:58.398261Z",
      "duration_ms": 3.85,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Get Person - Not Found",
      "endpoint": "/api/v1/organization/people/920a8478-946c-41ed-8543-e520aa87f0a8",
      "method": "GET",
      "expected_status": [
        404
      ],
      "actual_status": 404,
      "payload": null,
      "response_body": {
        "detail": "Person not found"
      },
      "response_text": "{\"detail\":\"Person not found\"}",
      "timestamp": "2025-08-07T10:46:58.504161Z",
      "duration_ms": 5.77,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Update Person - Not Found",
      "endpoint": "/api/v1/organization/people/c2ab811b-d9ef-4ff4-bd04-f6a57e814024",
      "method": "PUT",
      "expected_status": [
        404
      ],
      "actual_status": 404,
      "payload": {
        "job_title": "Updated Title"
      },
      "response_body": {
        "detail": "Person not found"
      },
      "response_text": "{\"detail\":\"Person not found\"}",
      "timestamp": "2025-08-07T10:46:58.608672Z",
      "duration_ms": 4.41,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Delete Person - Not Found",
      "endpoint": "/api/v1/organization/people/2dbd4128-fa7a-4805-84fc-70766e6017eb",
      "method": "DELETE",
      "expected_status": [
        404
      ],
      "actual_status": 404,
      "payload": null,
      "response_body": {
        "detail": "Person not found"
      },
      "response_text": "{\"detail\":\"Person not found\"}",
      "timestamp": "2025-08-07T10:46:58.713493Z",
      "duration_ms": 4.65,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Unauthorized - GET /api/v1/organization/people/",
      "endpoint": "/api/v1/organization/people/",
      "method": "GET",
      "expected_status": [
        401,
        403
      ],
      "actual_status": 403,
      "payload": null,
      "response_body": {
        "detail": "Not authenticated"
      },
      "response_text": "{\"detail\":\"Not authenticated\"}",
      "timestamp": "2025-08-07T10:46:58.815742Z",
      "duration_ms": 2.06,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Unauthorized - POST /api/v1/organization/people/",
      "endpoint": "/api/v1/organization/people/",
      "method": "POST",
      "expected_status": [
        401,
        403
      ],
      "actual_status": 403,
      "payload": {
        "first_name": "Test",
        "last_name": "User",
        "email": "test@test.com",
        "role": "User"
      },
      "response_body": {
        "detail": "Not authenticated"
      },
      "response_text": "{\"detail\":\"Not authenticated\"}",
      "timestamp": "2025-08-07T10:46:58.817201Z",
      "duration_ms": 1.43,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Unauthorized - GET /api/v1/organization/people/217dffe7-0bfc-498d-9619-049b9746229b",
      "endpoint": "/api/v1/organization/people/217dffe7-0bfc-498d-9619-049b9746229b",
      "method": "GET",
      "expected_status": [
        401,
        403
      ],
      "actual_status": 403,
      "payload": null,
      "response_body": {
        "detail": "Not authenticated"
      },
      "response_text": "{\"detail\":\"Not authenticated\"}",
      "timestamp": "2025-08-07T10:46:58.818590Z",
      "duration_ms": 1.37,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Unauthorized - PUT /api/v1/organization/people/8d31075d-145c-43a0-b40a-302217c90f6c",
      "endpoint": "/api/v1/organization/people/8d31075d-145c-43a0-b40a-302217c90f6c",
      "method": "PUT",
      "expected_status": [
        401,
        403
      ],
      "actual_status": 403,
      "payload": {
        "job_title": "Test"
      },
      "response_body": {
        "detail": "Not authenticated"
      },
      "response_text": "{\"detail\":\"Not authenticated\"}",
      "timestamp": "2025-08-07T10:46:58.819945Z",
      "duration_ms": 1.34,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    },
    {
      "test_name": "Unauthorized - DELETE /api/v1/organization/people/ad76b09b-9bb0-47bd-b129-cfa6cd952df2",
      "endpoint": "/api/v1/organization/people/ad76b09b-9bb0-47bd-b129-cfa6cd952df2",
      "method": "DELETE",
      "expected_status": [
        401,
        403
      ],
      "actual_status": 403,
      "payload": null,
      "response_body": {
        "detail": "Not authenticated"
      },
      "response_text": "{\"detail\":\"Not authenticated\"}",
      "timestamp": "2025-08-07T10:46:58.821317Z",
      "duration_ms": 1.35,
      "status": "PASS",
      "error_message": null,
      "validation_notes": null
    }
  ],
  "test_data_summary": {
    "people_created": 0,
    "created_person_ids": [],
    "sample_data": {
      "people_list": {
        "people": [],
        "total": 0,
        "page": 1,
        "page_size": 20,
        "total_pages": 0
      }
    }
  }
}