{
  "start_time": "2025-08-06 14:26:55.821709",
  "end_time": "2025-08-06 14:27:00.877117",
  "test_suites": {
    "Frontend Tests": {
      "name": "Frontend Tests",
      "passed": 0,
      "failed": 1,
      "errors": [
        "Jest tests failed"
      ],
      "output": "\n> @arketic/web@1.0.0 test\n> jest --watchAll=false --coverage=false --verbose\n\nError: \u25cf Validation Error:\n\n  Module <rootDir>/jest.setup.js in the setupFilesAfterEnv option was not found.\n         <rootDir> is: /home/ali/arketic/apps/web\n\n  Configuration Documentation:\n  https://jestjs.io/docs/configuration\n\nnpm error Lifecycle script `test` failed with error:\nnpm error code 1\nnpm error path /home/ali/arketic/apps/web\nnpm error workspace @arketic/web@1.0.0\nnpm error location /home/ali/arketic/apps/web\nnpm error command failed\nnpm error command sh -c jest --watchAll=false --coverage=false --verbose\n",
      "duration": 0.49172
    },
    "Chat API E2E Tests": {
      "name": "Chat API E2E Tests",
      "passed": 4,
      "failed": 5,
      "errors": [
        {
          "test": "Send Message API",
          "error": "Expected 200, got 500: {\"detail\":\"Failed to send message\"}",
          "timestamp": "2025-08-06T14:26:56.595616"
        },
        {
          "test": "Get Chat History API",
          "error": "Expected 200, got 500: {\"detail\":\"Failed to retrieve chat history\"}",
          "timestamp": "2025-08-06T14:26:56.606969"
        },
        {
          "test": "WebSocket Connection",
          "error": "BaseEventLoop.create_connection() got an unexpected keyword argument 'extra_headers'",
          "timestamp": "2025-08-06T14:26:56.630398"
        },
        {
          "test": "WebSocket Message Broadcasting",
          "error": "BaseEventLoop.create_connection() got an unexpected keyword argument 'extra_headers'",
          "timestamp": "2025-08-06T14:26:56.630448"
        },
        {
          "test": "Error Handling",
          "error": "Expected 404 for non-existent chat, got 500",
          "timestamp": "2025-08-06T14:26:56.643534"
        }
      ],
      "duration": 0.296894
    },
    "OpenAI Integration Tests": {
      "name": "OpenAI Integration Tests",
      "passed": 5,
      "failed": 5,
      "errors": [
        {
          "test": "Save OpenAI API Key",
          "error": "Response should mention encryption",
          "timestamp": "2025-08-06T14:26:56.845609"
        },
        {
          "test": "Get OpenAI API Key",
          "error": "Expected 200, got 405: {\"detail\":\"Method Not Allowed\"}",
          "timestamp": "2025-08-06T14:26:56.846987"
        },
        {
          "test": "OpenAI Connection Test",
          "error": "Response should include success field",
          "timestamp": "2025-08-06T14:26:56.850205"
        },
        {
          "test": "Send Message with AI Response",
          "error": "Expected 200, got 500: {\"detail\":\"Failed to send message\"}",
          "timestamp": "2025-08-06T14:26:56.874499"
        },
        {
          "test": "AI Response Generation",
          "error": "Expected 200, got 500: {\"detail\":\"Failed to retrieve chat history\"}",
          "timestamp": "2025-08-06T14:26:59.886410"
        }
      ],
      "duration": 3.321948
    },
    "Database Operations Tests": {
      "name": "Database Operations Tests",
      "passed": 1,
      "failed": 7,
      "errors": [
        {
          "test": "Database Health Check",
          "error": "Should include connection pool info",
          "timestamp": "2025-08-06T14:27:00.164741"
        },
        {
          "test": "Database CRUD Operations",
          "error": "Message create failed: 500",
          "timestamp": "2025-08-06T14:27:00.191091"
        },
        {
          "test": "Database Concurrent Operations",
          "error": "Expected at least 7 successful messages, got 0",
          "timestamp": "2025-08-06T14:27:00.375328"
        },
        {
          "test": "Database Error Handling",
          "error": "Expected 404 for non-existent chat, got 403",
          "timestamp": "2025-08-06T14:27:00.379852"
        },
        {
          "test": "Database Constraints and Validation",
          "error": "Valid message creation failed: 500",
          "timestamp": "2025-08-06T14:27:00.420160"
        },
        {
          "test": "Database Pagination and Limits",
          "error": "Default pagination failed",
          "timestamp": "2025-08-06T14:27:00.724762"
        },
        {
          "test": "Database Performance Metrics",
          "error": "History retrieval failed",
          "timestamp": "2025-08-06T14:27:00.858771"
        }
      ],
      "duration": 0.909643
    }
  },
  "overall_summary": {
    "total_tests": 28,
    "total_passed": 10,
    "total_failed": 18,
    "success_rate": 35.714285714285715,
    "duration": 5.055408
  },
  "environment_info": {
    "python_version": "3.10.12 (main, May 27 2025, 17:12:29) [GCC 11.4.0]",
    "working_directory": "/home/ali/arketic",
    "timestamp": "2025-08-06T14:26:55.821718",
    "services": {
      "backend": {
        "status": "running",
        "status_code": 200
      }
    }
  },
  "issues_found": [
    {
      "category": "Connectivity",
      "severity": "Medium",
      "description": "Chat API E2E Tests: WebSocket Connection - Connection issues",
      "recommendation": "Check network connectivity and service health"
    },
    {
      "category": "Connectivity",
      "severity": "Medium",
      "description": "Chat API E2E Tests: WebSocket Message Broadcasting - Connection issues",
      "recommendation": "Check network connectivity and service health"
    },
    {
      "category": "Connectivity",
      "severity": "Medium",
      "description": "Database Operations Tests: Database Health Check - Connection issues",
      "recommendation": "Check network connectivity and service health"
    }
  ],
  "recommendations": [
    "\ud83d\udea8 Chat system has significant issues that need immediate attention.",
    "\u2705 OpenAI integration appears to be working correctly.",
    "\u2705 Database operations are functioning properly."
  ]
}